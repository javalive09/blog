---
title: 命令行
date: 2017-02-10 16:42:45
tags:
---

# linux文件
## 列出目录下文件的权限
```
ls －al
```
## 修改文件权限
权限的字母表示：u-user  g-group  o-others  a-all
权限的数字表示：4-读  2-写  1-执行
```
chmod 777 a.txt
chmod u=rwx, g=rwx, o=rwx a.txt
chmod a=rwx a.txt
```
## 修改文件夹权限
```
chmod -R 777  folder
```

## 查看文件夹的大小
du 命令 disk use
参数含义：
s:sum 
h:human can read
```
du -sh ./sdk
```
## 查看磁盘使用情况
```
du -h
```

## 查找文件
以当前目录为根目录查找名字为DownloadManager.Java的文件所在位置
```
find . -name "DownloadManager.java" 
```
忽略大小写
```
find . -iname "DownloadManager.java" 
```

## 查找字符串
查找某目录下所有包含DownloadManager字符的文件
参数含义：
r:recurisive  递归
n:显示line number
```
grep -rn DownloadManager /Users/peter/Downloads/Android4.4源码
```
## 删除jar包中的文件夹
```
zip --delete baseproject.jar "com/luajava/*"  
```
## 列出历史命令
```
history

history | more
```
## 链接文件
ln -s [source] [target]
```
ln -s /Users/peter/blog/source/post-commit post-commit
```

## 环境变量
### 列出所有的环境变量
```
env
```
### 加入环境变量
```
export PATH=$PATH:[path]
export PATH=$PATH:/Users/peter/Downloads/protoc-3.3.0-osx-x86_64/bin
```
或
```
vim ~/.bashrc
加入export PATH=$PATH:/Users/peter/Downloads/protoc-3.3.0-osx-x86_64/bin
```

## echo
```
echo 'android-8.0.0_r17' >> readme.txt
//>> 是追加内容
//> 是覆盖原有内容
```



------

# adb
## 安装程序
### 重新安装
```
adb install com.xx.xx 
```
### 重新安装，保持原程序数据
```
adb install -r com.xx.xx 
```
### 安装到SD卡中
```
adb install -s com.xx.xx 
```
## 卸载程序
### 完全卸载
```
adb uninstall com.xx.xx
```
### 卸载，保留缓存
```
adb uninstall －k com.xx.xxx
```
## 删除程序缓存
```
shell@android:/data/data/com.example.testandroidid # rm -rf cache  
```
```
shell@android:/data/data/com.example.testandroidid # rm -r cache  
```
## log
### 过滤
#### 字符串xxx
```
adb logcat | grep xxx
```
#### error级
```
adb logcat | grep "^E.123" //tag 123
```
#### warning级
```
adb logcat | grep "^W.123" //tag 123
```
#### 所有
```
adb logcat | grep "^..123" //tag 123
```
### 清除
```
adb logcat -c && adb logcat
```
### 保存到电脑
```
adb logcat > log.txt 
```
### 保存到手机
```
logcat -v threadtime --pid 17393 -f /storage/emulated/0/.peter/logs/codebag/codebag.log -r 20480 -n 3 -s *:I
//官方文档：https://developer.android.com/studio/command-line/logcat.html#filteringOutput
```

## kill app
```
pm force-stop com.xx.xx 
```
## 列出所有安装包
```
pm list package
```

## 修改host
```
//android
adb shell  
su  
vi /etc/hosts

//mac
vi /private/etc/hosts
```


## 打开网页
```
adb shell am start -a android.intent.action.VIEW -d http://www.baidu.com
```

## 打开设置
```
adb shell am start -n com.android.settings/com.android.settings.Settings
```

## 打开入口程序列表
```
adb shell am start -a "android.intent.action.MAIN"  
```

## 获取分辨率
```
adb shell wm size
```

## 设置分辨率
```
adb shell wm size 540x960
```

## 还原分辨率
```
adb shell wm size reset
```

## 获取屏幕密度
```
adb shell wm density  
```

## 设置屏幕密度
```
adb shell wm density 320  
```

## 还原屏幕密度
```
adb shell wm density reset  
```

## “Read-only file system”解决办法
```
adb remount
```

## 查询端口所在进程
```
sudo netstat -tulpn | grep :8000 
```

## kill pid
```
kill -9 <进程 pid>
```
## 查看最大线程数
```
cat /proc/sys/kernel/threads-max  
```
## 查看系统各个限制的数值
```
ulimit -a
```
## 录制gif
android 4.4 以上
### 录制
```
adb shell screenrecord  --bit-rate 2000000 --size 480x800 /sdcard/test.mp4  
```
### 导出
```
adb pull /sdcard/test.mp4 ~/Desktop/test.mp4  
```
## 修改文件所在组
```
sudo chown -R $USER /usr/local 
```
```
sudo chown -R $peter /usr/local
```

## 导出anr文件
anr 数据保存位置：/data/anr/traces.txt  
```
adb pull /data/anr/traces.txt ~/Desktop/    

```

------

## debug

### 启动时等待调试
set-debug-app 设置调试
-w: wait

```
adb shell am set-debug-app -w com.peter.util.searcher
```

### 持续调试
--persistent: 每次启动都调试

```
adb shell am set-debug-app -w --persistent com.peter.util.searcher
```
### 清除持续调试
```
adb shell am clear-debug-app
```


# python
## 开一个简单的服务器
### python 2.x
```
python -m SimpleHTTPServer [port]
```
### python 3.x
```
python -m http.server [port]
```

------

# 内存

## top命令

```
top -h //help
top -m num //显示的最多进程数
top -s col //Column to sort by (cpu,vss,rss,thr)
top -m 10 -s cpu //ddd
```

------

# 网络
## ping网速
-c count
在收发指定的count个数目的报文后停止
-f
尽可能快地发送报文
-s packetsize
设置要发送的报文大小(单位为字节，最大长度是64k，缺省长度是64)
-i wait
设置连续报文发送时报文间的发送时间间隔（单位为秒）
```
ping -c 5 -s 1024 -i 2 www.baidu.com  
```
发送 5次   1024 byte 间隔 2秒 到百度服务器。

------

# gcc

## 编译单个源文件
gcc xxx.c -o xxx
```
gcc test.c -o test
```
执行./xxx 可运行

## 编译多个源文件
* gcc -c xxx.c 分别编译源文件为xxx.o
* gcc xxx.o yyy.o -o main

```
gcc -c hotel.c
```
```
gcc main.o hotel.o -o main
```
执行./main可运行






